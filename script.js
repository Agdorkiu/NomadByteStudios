const translations = {
  es: {
    tagline: "Tecnología nómada. Inteligencia creativa.",
    nav: {
      home: "Inicio",
      services: "Servicios",
      projects: "Proyectos",
      process: "Metodología",
      contact: "Contacto",
    },
    cta: {
      primary: "Agenda una llamada",
      secondary: "Ver proyectos",
      tertiary: "Hablemos",
    },
    hero: {
      eyebrow: "Estudio de desarrollo + IA",
      title: "Creamos software, experiencias y mundos con inteligencia artificial.",
      description:
        "Nomad Byte Studio es un laboratorio nómada de ingeniería y diseño. Construimos productos digitales —apps, webs, videojuegos y automatizaciones— con una visión futurista, elegante y centrada en resultados.",
      cardTitle: "Proyectos actuales",
      cardItem1: "Webs interactivas con IA",
      cardItem2: "Bots de Discord y automatización",
      cardItem3: "Videojuegos narrativos",
    },
    stats: {
      ai: "Flujos inteligentes que reducen tiempos y costos.",
      ux: "Diseño oscuro y futurista para destacar tu marca.",
      fullstack: "Del concepto al despliegue, todo en un mismo equipo.",
    },
    services: {
      eyebrow: "Servicios",
      title: "Un estudio flexible para construir cualquier tipo de producto.",
      description:
        "Diseñamos y desarrollamos soluciones a medida combinando software tradicional con inteligencia artificial.",
      web: {
        title: "Plataformas web",
        body: "Aplicaciones rápidas, escalables y seguras con experiencias premium.",
      },
      mobile: {
        title: "Apps móviles",
        body: "Interfaces elegantes para iOS y Android con funciones offline.",
      },
      games: {
        title: "Videojuegos",
        body: "Mecánicas inmersivas, narrativa interactiva y arte digital original.",
      },
      ai: {
        title: "IA + automatización",
        body: "Bots, agentes y flujos inteligentes conectados a tu negocio.",
      },
    },
    projects: {
      eyebrow: "Proyectos",
      title: "Portafolio modular y listo para escalar.",
      description: "Divide tus proyectos por categorías. Solo reemplaza los textos con tus proyectos reales.",
      filters: {
        all: "Todo",
        web: "Web",
        bots: "Bots",
        games: "Videojuegos",
        ai: "IA",
      },
      sample: {
        web: "Landing dinámica con narrativa visual y micro-interacciones.",
        bots: "Bots modulares con panel de control y analítica.",
        games: "Prototype narrativo con estética cyber-noir.",
        ai: "Agente que optimiza procesos y sugiere mejoras.",
      },
    },
    process: {
      eyebrow: "Metodología",
      title: "Un camino claro desde la idea hasta el lanzamiento.",
      step1: {
        title: "Exploración",
        body: "Workshop para definir visión, alcance y objetivos medibles.",
      },
      step2: {
        title: "Diseño y prototipado",
        body: "Wireframes, UI futurista y validación rápida.",
      },
      step3: {
        title: "Desarrollo",
        body: "Arquitectura sólida, IA integrada y despliegue continuo.",
      },
      step4: {
        title: "Evolución",
        body: "Escalamos, medimos y optimizamos para el siguiente nivel.",
      },
    },
    contact: {
      eyebrow: "Contacto",
      title: "Conectemos y construyamos tu próximo producto.",
      description: "Completa el formulario y recibirás una respuesta rápida. Integramos el formulario con Supabase.",
      form: {
        name: "Nombre",
        email: "Correo",
        type: "Tipo de proyecto",
        message: "Mensaje",
        submit: "Enviar mensaje",
        options: {
          web: "Web / App",
          games: "Videojuego",
          ai: "IA / Automatización",
          other: "Otro",
        },
      },
      panel: {
        title: "Supabase listo",
        body: "Solo agrega tu URL y clave anónima. Los datos se enviarán a la tabla contacts.",
      },
    },
    footer: {
      rights: "Todos los derechos reservados.",
      backToTop: "Volver arriba",
    },
  },
  en: {
    tagline: "Nomad technology. Creative intelligence.",
    nav: {
      home: "Home",
      services: "Services",
      projects: "Projects",
      process: "Process",
      contact: "Contact",
    },
    cta: {
      primary: "Book a call",
      secondary: "View projects",
      tertiary: "Let’s talk",
    },
    hero: {
      eyebrow: "Development studio + AI",
      title: "We craft software, experiences, and worlds powered by AI.",
      description:
        "Nomad Byte Studio is a nomadic lab for engineering and design. We build digital products—apps, websites, games, and automations—with a futuristic, elegant, results-driven mindset.",
      cardTitle: "Current focus",
      cardItem1: "Interactive AI-powered websites",
      cardItem2: "Discord bots and automation",
      cardItem3: "Narrative-driven games",
    },
    stats: {
      ai: "Intelligent flows that reduce time and cost.",
      ux: "Dark futuristic design to elevate your brand.",
      fullstack: "From concept to launch with one team.",
    },
    services: {
      eyebrow: "Services",
      title: "A flexible studio to build any type of product.",
      description: "We design and develop custom solutions blending software and artificial intelligence.",
      web: {
        title: "Web platforms",
        body: "Fast, scalable, and secure applications with premium experiences.",
      },
      mobile: {
        title: "Mobile apps",
        body: "Elegant iOS and Android interfaces with offline capabilities.",
      },
      games: {
        title: "Games",
        body: "Immersive mechanics, interactive storytelling, and original digital art.",
      },
      ai: {
        title: "AI + automation",
        body: "Bots, agents, and smart workflows connected to your business.",
      },
    },
    projects: {
      eyebrow: "Projects",
      title: "Modular portfolio ready to scale.",
      description: "Separate your projects by category. Replace the samples with your real work.",
      filters: {
        all: "All",
        web: "Web",
        bots: "Bots",
        games: "Games",
        ai: "AI",
      },
      sample: {
        web: "Dynamic landing page with visual storytelling and micro-interactions.",
        bots: "Modular bots with dashboard and analytics.",
        games: "Narrative prototype with cyber-noir aesthetics.",
        ai: "Agent that optimizes processes and suggests improvements.",
      },
    },
    process: {
      eyebrow: "Process",
      title: "A clear path from idea to launch.",
      step1: {
        title: "Discovery",
        body: "Workshop to define vision, scope, and measurable goals.",
      },
      step2: {
        title: "Design & prototyping",
        body: "Wireframes, futuristic UI, and rapid validation.",
      },
      step3: {
        title: "Development",
        body: "Solid architecture, AI integration, and continuous delivery.",
      },
      step4: {
        title: "Growth",
        body: "Scale, measure, and optimize for the next level.",
      },
    },
    contact: {
      eyebrow: "Contact",
      title: "Let’s connect and build your next product.",
      description: "Fill out the form for a quick response. The form integrates with Supabase.",
      form: {
        name: "Name",
        email: "Email",
        type: "Project type",
        message: "Message",
        submit: "Send message",
        options: {
          web: "Web / App",
          games: "Game",
          ai: "AI / Automation",
          other: "Other",
        },
      },
      panel: {
        title: "Supabase ready",
        body: "Add your URL and anon key. Data will be sent to the contacts table.",
      },
    },
    footer: {
      rights: "All rights reserved.",
      backToTop: "Back to top",
    },
  },
};

const SUPABASE_URL = "";
const SUPABASE_ANON_KEY = "";

const state = {
  language: "es",
};

const setLanguage = (lang) => {
  state.language = lang;
  document.documentElement.lang = lang;
  document.querySelector("#languageToggle").textContent = lang === "es" ? "EN" : "ES";
  document.querySelectorAll("[data-i18n]").forEach((element) => {
    const key = element.dataset.i18n;
    const value = key.split(".").reduce((acc, part) => acc?.[part], translations[lang]);
    if (value) {
      element.textContent = value;
    }
  });
};

const setupFilters = () => {
  const buttons = document.querySelectorAll(".filter-btn");
  const projects = document.querySelectorAll(".project");

  buttons.forEach((button) => {
    button.addEventListener("click", () => {
      const filter = button.dataset.filter;
      buttons.forEach((btn) => btn.classList.remove("active"));
      button.classList.add("active");
      projects.forEach((project) => {
        const matches = filter === "all" || project.dataset.category === filter;
        project.style.display = matches ? "block" : "none";
      });
    });
  });
};

const setupContactForm = () => {
  const form = document.querySelector("#contactForm");
  const status = document.querySelector("#formStatus");

  if (!form) return;

  form.addEventListener("submit", async (event) => {
    event.preventDefault();
    status.textContent = "";

    if (!SUPABASE_URL || !SUPABASE_ANON_KEY) {
      status.textContent =
        state.language === "es"
          ? "Agrega tu URL y clave anónima de Supabase en script.js para activar el envío."
          : "Add your Supabase URL and anon key in script.js to enable submissions.";
      return;
    }

    const { createClient } = window.supabase;
    const client = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const formData = new FormData(form);
    const payload = {
      name: formData.get("name"),
      email: formData.get("email"),
      type: formData.get("type"),
      message: formData.get("message"),
      created_at: new Date().toISOString(),
    };

    const { error } = await client.from("contacts").insert([payload]);

    if (error) {
      status.textContent =
        state.language === "es"
          ? "Ocurrió un error al enviar el mensaje."
          : "There was an error sending the message.";
      return;
    }

    form.reset();
    status.textContent =
      state.language === "es" ? "Mensaje enviado correctamente." : "Message sent successfully.";
  });
};

document.addEventListener("DOMContentLoaded", () => {
  setLanguage(state.language);
  setupFilters();
  setupContactForm();

  document.querySelector("#languageToggle").addEventListener("click", () => {
    const next = state.language === "es" ? "en" : "es";
    setLanguage(next);
  });
});
